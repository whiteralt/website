<!DOCTYPE html>
<html lang="en, ru">
  <head>
    <meta charset="UTF-8" />
    <title>Redirecting...</title>
  </head>
  <body>
    <p>
      <noscript>
        У вас отключены сценарии (JavaScript), это означает что вы не можете автоматически переадресоваться.
      </noscript>
    </p>
    <p>You have turned off scripts (JavaScript), it means you can't automatically redirected.</p>
    <p>&nbsp;</p>
    <p>
      Hello, this true main page going to redirect you to your browser
      language's website version.
    </p>
    <p>
      If you having trouble with redirecting to needed language version of site,
      go to down & choose directory.
    </p>
    <p>&nbsp;</p>
    <p>
      Привет, эта настоящая главная страница переадресовывает вас в версию сайта
      на выбранном языке вашего браузере.
    </p>
    <p>
      Если у вас не получается переадресоваться в нужную версию языка сайта,
      перейдите ниже и выберите директорию.
    </p>
    <p>
      <p>
        &nbsp;
      </p>
    </p>
    <p>
      <a href="./en/index.html">English version of site</a>
    </p>
    <p>
      <a href="./ru/index.html">Русская версия сайта</a>
    </p>
    <script>
      window.onload = function () {
        var ln = window.navigator.language || navigator.browserLanguage;
        var myApp = {};

        /**
         * Gets cookie value by name
         * @param  {string} name Name of cookie to retrieve
         * @return {string}      Value of cookie if found
         */
        myApp.ReadCookie = function (name) {
          var nameEQ = name + "=";
          var ca = document.cookie.split(";");
          for (var i = 0; i < ca.length; i++) {
            var c = ca[i];
            while (c.charAt(0) == " ") c = c.substring(1, c.length);
            if (c.indexOf(nameEQ) === 0)
              return c.substring(nameEQ.length, c.length);
          }
          return null;
        };

        /**
         * Removes cookie value
         * @param  {string} name Name of cookie
         */
        myApp.EraseCookie = function (name) {
          if (myApp.ReadCookie(name)) document.cookie = name + "=";
          console.log(name + " erased.");
        };

        /**
         * Deletes cookie reference
         * @param  {string} name Name of cookie
         */
        myApp.DeleteCookie = function (name) {
          document.cookie = name + "=; expires=Thu, 01 Jan 1970 00:00:01 GMT;";
          console.log(name + " deleted.");
        };

        /**
         * Set cookie value
         * @param  {string} name Name of cookie
         */
        myApp.SetCookie = function (name, value, expires) {
          var cookiestring = [[name, "=", encodeURIComponent(value)].join("")];
          var expire_time = "";

          if (expires) {
            expire_time = new Date();
            expire_time.setTime(expire_time.getTime() + expires);
            expire_time = expire_time.toGMTString();
            cookiestring.push(["expires=", expire_time].join(""));
          }
          cookiestring = cookiestring.join(";") + ";";
          document.cookie = cookiestring;
          console.log(
            "SetCookie: " + name + ' set to "' + value + '"',
            "Expires?",
            expire_time
          );
        };

        if (myApp.ReadCookie("lang_redirect")) {
          return;
        }

        myApp.SetCookie("lang_redirect", ln);

        if (ln == "en") {
          window.location.href = "./en/index.html";
        } else if (ln == "ru") {
          window.location.href = "./ru/index.html";
        } else {
          window.location.href = "./ru/index.html";
        }
      };
    </script>
  </body>
</html>
